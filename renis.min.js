!function(e,t){function o(a){function i(){return!(!e.history||!e.history.pushState)}function r(e,o,a){a=a||{};var i=a.expires;if("number"==typeof i&&i){var r=new Date;r.setTime(r.getTime()+1e3*i),i=a.expires=r}i&&i.toUTCString&&(a.expires=i.toUTCString()),o=encodeURIComponent(o);var n=e+"="+o;for(var c in a){n+="; "+c;var s=a[c];s!==!0&&(n+="="+s)}t.cookie=n}function n(e){var o=t.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return o?decodeURIComponent(o[1]):void 0}function c(t,o){t&&o&&(m&&e.localStorage.setItem(t,o),v&&r(t,o,{expires:31536e3}))}function s(t){if(t){var o,a;return m&&(o=e.localStorage.getItem(t)),v&&(a=n(t)),o||a||void 0}}function u(){var o=e._fbq||(e._fbq=[]);if(!o.loaded){var a=t.createElement("script");a.async=!0,a.src="//connect.facebook.net/en_US/fbds.js";var i=t.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i),o.loaded=!0}}function p(e,t){void 0!==e&&-1!=Object.prototype.toString.call(this[e]).indexOf("Function")&&this[e].apply(this,t)}function l(e){if(e&&-1!=Object.prototype.toString.call(e).indexOf("Array"))for(var t=0;t<e.length;t++)Object.prototype.toString.call(e[t]).indexOf("Array")>-1&&p.apply(this,[e[t][0],e[t].slice(1)])}function f(t){t&&(e._fbq=e._fbq||[],e._fbq.push(["addPixelId",t]),e._fbq.push(["track","PixelInitialized",{}]))}var y,d=this,g={redirect:/__fb_true=1/},h="__uid",_=e.location.href,m="localStorage"in e,v=navigator.cookieEnabled,b={},x={_audience:"1418051851832684",auto:{options:{casco:"6022958850356",osago:"6022958850356",osago_casco:"6022958850356"},extra:{casco:"6022958860956",osago:"6022958860956",osago_casco:"6022958860956"},confirm:{casco:"6022958899356",osago:"6022958899356",osago_casco:"6022958899356"},confirmm:{casco:"6022959029556",osago:"6022959029556",osago_casco:"6022959029556"},order:{casco:"6022958867356",osago:"6022958867356",osago_casco:"6022958867356"}}};o.prototype.push=function(){Object.prototype.toString.call(arguments[0]).indexOf("Array")>-1?l.call(d,arguments):l.call(d,[Array.prototype.slice.call(arguments)])},this.init=function(){l.call(d,a),g.redirect.test(_)&&(y=s(h),y&&d.redirect(y)),e.clearTimeout(b.oninit),b.oninit=e.setTimeout(function(){u(),f(x._audience)},3e3)},this.redirect=function(t){t&&(e.location.search="?calc_id="+t)},this.trigger=function(t,o){t&&(o=o?Number(o).toFixed(2):0..toFixed(2),e._fbq=e._fbq||[],e._fbq.push(["track",t,{value:o,currency:"RUB"}]))},this.track=function(t){if(-1!=Object.prototype.toString.call(t).indexOf("Object")){t.accountNumber&&c(h,t.accountNumber),t.page&&d.updateQuery("__fb_page",t.page),t.policyType||(t.policyType="");var o=t.policyType.replace(/\+/gi,"_");d.updateQuery("__fb_"+o,1),f(x._audience),e.setTimeout(function(){d.updateQuery("__fb_page"),d.updateQuery("__fb_"+o)},1500),x[t.calcName]&&x[t.calcName][t.page]&&x[t.calcName][t.page][o]&&d.trigger(x[t.calcName][t.page][o],t.cost)}},this.parseQuery=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^\?/,""),e?e.trim().split("&").reduce(function(e,t){var o=t.replace(/\+/g," ").split("="),a=o[0],i=o[1];return a=decodeURIComponent(a),i=void 0===i?null:decodeURIComponent(i),e.hasOwnProperty(a)?Array.isArray(e[a])?e[a].push(i):e[a]=[e[a],i]:e[a]=i,e},{}):{})},this.stringifyQuery=function(e){return e?Object.keys(e).map(function(t){var o=e[t];return Array.isArray(o)?o.map(function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"):encodeURIComponent(t)+"="+encodeURIComponent(o)}).join("&"):""},this.pushQuery=function(t,o){if(i()&&t){var a=d.parseQuery(e.location.search);a[t]=o;var r=d.stringifyQuery(a);e.history.pushState({},"",e.location.pathname+"?"+r+e.location.hash)}},this.updateQuery=function(t,o){if(i()&&t){var a=d.parseQuery(e.location.search);a[t]=o,"undefined"==typeof o&&delete a[t];var r=d.stringifyQuery(a);e.history.replaceState(e.history.state,"",e.location.pathname+"?"+r+e.location.hash)}},this.removeQueryKeys=function(t){if(i()){for(var o=d.parseQuery(e.location.search),a=0;a<t.length;a++){var r=t[a];delete o[r]}t||(o={});var n=d.stringifyQuery(o);e.history.replaceState(e.history.state,"",e.location.pathname+"?"+n+e.location.hash)}}}e._ait&&e._ait.inited||(e._ait.inited=!0,e._ait=new o(e._ait),e._ait.init())}(window,document);